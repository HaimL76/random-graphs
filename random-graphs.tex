\documentclass{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{graphicx} % Required for inserting images

\title{random-graphs}
\author{haiml76 }
\date{September 2025}

\begin{document}

\maketitle

\section{}
\section{}
\section{}
\section{}
\subsection{}
For $n$ vertices, we have $n!$ permutations, but Hamilton cycles are indifferent to the starting point (since they are \textbf{cycles}), hence we divide the number of permutations by the number of starting points for each cycle, that is $n$. Hamilton cycles are also indifferent to direction, hence we divide this count by $2$ and we get $\frac{(n-1)!}{2}$. Each edge in $\mu(F)$ comes from an edge between two vertices in consecutive layers of $W$, but that is $d$ choices of vertices from layers $1,2$, then $d-1$ choices of the remaining vertices from layer $k$ together with $d$ choices of vertices from layer $k+1$, for every $2\leq{k}\leq{n-1}$, then $d-1$ choices of the remaining vertices from layers $n,1$, but because all the choices are independent, we have $d^2(d(d-1))^{n-2}(d-1)^2=(d(d-1))^2$ choices.


in the configuration, hence there are $d(d-1)$ choices for each vertex, that is $(d(d-1))^n$.
\section*{4}
\subsection*{4.a}

The number of possible Hamilton circles in a multi-graph with $n$ vertices is: $(n-1)!/2$.
(There are $n!$ ways to arrange n vertices. We need to divide by $n$ because of radial symmetry. We need to divide by 2 because the direction doesn't matter.)
To get such a circle in $\mu(F)$ we need $F$ to connect between the $n$ layers of $W$. In order to connect the first two layers we need to choose from $d$ points of the first and $d$ points of the second layer. To connect the second to the third, we need to choose from $d-1$ points of the second layer and $d$ points of the third, etc. In each layer of the $n$ layers we choose two points, Therefore, there are $(d(d-1))^n$ ways to build each circle.\\
Now we need to calculate the probability that the indicator telling that $F$ having these connections equals 1.
Since $F$ is built from uniform distribution, all we need to do is to calculate the ratio between the number of matchings containing the links we need and the total number of matchings. 
The total number of matchings is: $\frac{(nd)!}{2^{nd/2}(nd/2)!}$.\\
(We need to choose all $nd$ points. we divide by $2^{nd/2}$ because there are $nd/2$ pairs. We divide by $(nd/2)!$ because the inner order of the pairs doesn't matter.)\\
The number of matchings that contain the links we need is: $\frac{(n(d-2))!}{2^{n(d-2)/2}(n(d-2)/2)!}$. \\
(Here there are only $d-2$ points to pair in each layer.)\\
Overall:

\begin{align*}
\mathbb{E}[H] 
  &= \sum_{\text{every possible Hamilton circle}}
      \mathbb{E}\!\left[ \mathbf{1}_{\{\text{the circle is in }\mu(F)\}} \right] \\[6pt]
  &= \frac{(n-1)!}{2}(d(d-1))^n
      \frac{\tfrac{(n(d-2))!}{2^{n(d-2)/2}(n(d-2)/2)!}}
           {\tfrac{(nd)!}{2^{nd/2}(nd/2)!}} \\[6pt]
  &= \frac{(n-1)!}{2}(d(d-1))^n
      \frac{(n(d-2))! \, 2^{nd/2}(nd/2)!}
           {(nd)! \, 2^{n(d-2)/2}(n(d-2)/2)!}
\end{align*}
\hfill $\square$

\subsection*{4.b}
We will use Sterling's formula:
\begin{align*}
\mathbb{E}[H] 
&\approx \frac{\sqrt{2\pi n}\,\left(\tfrac{n}{e}\right)^n}{2n}
    \cdot (d(d-1))^n \cdot \\[6pt]
&\quad \cdot
    \frac{\sqrt{2\pi n(d-2)}\left(\tfrac{n(d-2)}{e}\right)^{n(d-2)} \cdot 2^{nd/2}\cdot\sqrt{\pi nd}\cdot\left(\tfrac{nd/2}{e}\right)^{nd/2}}
         {\sqrt{\pi nd/2}\left(\tfrac{n(d-2)/2}{e}\right)^{n(d-2)/2} \cdot 2^{nd/2}\cdot2^{-n}\cdot\sqrt{2\pi nd}\cdot\left(\tfrac{nd}{e}\right)^{nd}} \\[6pt]
&= \frac{\sqrt{2\pi n}\,\left(\tfrac{n}{e}\right)^n}{2n} \cdot (d(d-1))^n \cdot \\[6pt]
&\quad \cdot 2^n \cdot e^{nd + \tfrac{n(d-2)}{2} - \tfrac{nd}{2} - n(d-2)} \cdot
   n^{-nd - \tfrac{n(d-2)}{2} + \tfrac{nd}{2} + n(d-2)} \\
&\quad \cdot (d-2)^{\tfrac{n(d-2)}{2}} \cdot d^{-nd/2}\cdot 2^{-n} \\[6pt]
&= \frac{\sqrt{2\pi n}\,\left(\tfrac{n}{e}\right)^n}{2n} \cdot (d(d-1))^n\cdot e^n \cdot n^{-n}
    \cdot d^{-\tfrac{nd}{2}} \cdot (d-2)^{\,n(-1+\tfrac{d}{2})} \\[6pt]
&= \sqrt{\frac{\pi}{2n}} \,(d-1)^n \, d^{\,n(1-\tfrac{d}{2})} \cdot (d-2)^{\,-n(1-\tfrac{d}{2})} \\[6pt]
&\approx \sqrt{\frac{\pi}{2n}} \,\Big[(d-1)\,\left(\tfrac{d-2}{d}\right)^{\tfrac{d-2}{2}}\Big]^n.
\end{align*} \hfill $\square$

\subsection*{4.c}

\subsection*{4.d}
The number of 2-factors in the multi-graph is bounded by: $\frac{(2n)!}{n!2^n}$.\\
(There are $2n$ points to arrange, 2 from each layer to get a 2-regular subgraph. We divide by $n!$ because the order of pairing doesn't matter. we divide by $2^n$ because the inner order doesn't matter. This is only a boundary because we allow to choose two points from the same layer (plus, we might have multi edges).)\\
The number of ways we can build each 2-factor is: $\binom{d}{2}^n$.\\
(We need to choose twice from each layer)\\
As in (a), we need to calculate the probability that $F$ has the needed matchings.\\
The number of possible configurations is: $\frac{(nd)!}{(\tfrac{nd}{2})!2^{\tfrac{nd}{2}}}$\\
The number of configurations which contain the needed matchings for a certain 2-factor is: $\frac{(n(d-2))!}{(\tfrac{n(d-2)}{2})!2^{\tfrac{n(d-2)}{2}}}$\\
The probability we are looking for is the ratio of the last two. Overall:\\
\begin{align*}
\mathbb{E}[T] 
  &\leq \binom{d}{2}^n\cdot \frac{(2n)!}{n!2^n} \cdot \frac{(n(d-2))!(\tfrac{nd}{2})!2^{\tfrac{nd}{2}}}{(\tfrac{n(d-2)}{2})!2^{\tfrac{n(d-2)}{2}}(nd)!}
\end{align*}
\hfill $\square$

\subsection*{4.e}
Let $T_G$ be the random variable counting the 2-factors of a n-vertices d-regular graph $G$. Notice that every multi-graph without loops and multi-edges i.e. simple made by the configuration model is a d-regular graph. Therefore, $T_G = T | \, \mu(F) \, \text{is simple}$.\\
\[
\Longrightarrow{} \mathbb{E}[T_G]=\mathbb{E}[T | \, \mu(F) \, \text{is simple}]\underset{\text{total expectation}}{\leq} \frac{\mathbb{E}[T]}{\mathbb{P}(\mu(F) \, \text{is simple})}\underset{\substack{\text{shown in } \\ \text{the lecture}}}{= }e^{\tfrac{d^2-1}{4}} O(\mathbb{E}[T])
\]
Now we can use Markov's inequality:\\
\[
\mathbb{P}(T_G>n\mathbb{E}[T])\leq\frac{\mathbb{E}[T_G]}{n\mathbb{E}[T]}=\frac{e^{\tfrac{d^2-1}{4}} O(\mathbb{E}[T])}{n\mathbb{E}[T]} \leq \frac{c}{n}\xrightarrow{n \to \infty}0
\]
Therefore, a.a.s $T_G<n\mathbb{E}[T]$.\\
\text{                                        }\hfill $\square$

\subsection*{4.f}
\begin{align*}
\frac{\mathbb{E}[H_G]}{\mathbb{E}[T_G]}
&\underset{\text{(c),(e)}}{\ge} 
\frac{\mathbb{E}[H]}{n^2 \mathbb{E}[T]} \\[2mm]
&\ge 
\frac{
\dfrac{(n-1)!}{2} (d(d-1))^n \cdot
\dfrac{(n(d-2))! \, 2^{nd/2} (nd/2)!}{(nd)! \, 2^{n(d-2)/2} (n(d-2)/2)!}
}{
n^2 \cdot \binom{d}{2}^n \cdot 
\dfrac{(2n)!}{n! 2^n} \cdot 
\dfrac{(n(d-2))! (\tfrac{nd}{2})! 2^{nd/2}}{(\tfrac{n(d-2)}{2})! 2^{n(d-2)/2} (nd)!}
} \\[2mm]
&=
\frac{
\dfrac{1}{2} (n-1)! (d(d-1))^n
}{
n^2 \cdot \dfrac{(d(d-1))^n}{2^n} \cdot \dfrac{(2n)!}{n! 2^n}
}\\[2mm]
&=\frac{1}{2}\cdot2^{2n}\cdot n^{-2}\cdot\frac{n!(n-1)!}{(2n)!
}\\[2mm]
&\approx\frac{1}{2}\cdot2^{2n}\cdot n^{-3}\cdot\frac{2\pi n(\frac{n}{e})^{2n}}{\sqrt{2\pi 2n}(\frac{2n}{e})^{2n}
}\\[2mm]
&=\frac{1}{2}\cdot2^{2n}\cdot2^{-2n}\cdot n^{-2.5}\sqrt{\pi
}\\[2mm]
&\ge\frac{1}{2} n^{-2.5}
\end{align*}

\hfill $\square$

\subsection*{4.g}
We will use the construction from Tutte's paper. Let $G'$ be the new graph(for $f(a)=2\  \ \forall a \in V$).\\
We will use the perfect matching algorithm on $G'$. The matched edges define a spanning subgraph of $G'$.
Let $a \in V$, we check how do the vertices in $X(a)\cup Y(a)$ match.\\
All the $s(a)$ vertices in $Y(a)$ have to be paired to vertices in $X(a)$, since they are connected only to vertices of $X(a)$ according to the construction. Now we need to check how many vertices of $X(a)$ are not paired to vertices from $Y(a)$:\\
\[
d(a)-s(a)=d(a)-(d(a)-f(a))=f(a)=2
\]\\
Therefore, there are exactly two vertices in $X(a)$ who are not connected to vertices of $St(a)$ (they cannot be matched together according to the construction).\\
Therefore, there are two original edges of $G$ connecting $St(a)$ to two other stars. Since this is true for every single $a \in V$, all the edges together define a 2-factor on $G$.
\hfill $\square$

\subsection*{4.h}
phase 1: as in (g), we build $G'$, and use the perfect matching algorithm. We get a 2-factor on $G$.\\
phase 2: in (f) we proved that the ratio between the number of the Hamilton circles to the number of 2-factors in a d-regular graph is at least $\frac{1}{2n^{2.5}}$ a.a.s.. Therefore if we repeat phase 1 at least $n^{3.5}$ times we have:
\[
\mathbb{P}(\{\substack{\text{not getting Hamilton} \\ \text{circle even once}}\})\leq(1-\frac{1}{2n^{2.5}})^{n^{3.5}}=((1-\frac{1/2}{n^{2.5}})^{n^{2.5}})^n\approx e^{-\frac{1}{2}n}\xrightarrow{n \to \infty}0
\]\\
Therefore a.a.s. we get a Hamilton circle in $G$.\\
Since the matching algorithm is polynomial, and we use it $n^{3.5}$ times, the total algorithm is polynomial.
\hfill $\square$
\section{}
$G=G(V,E)$.
\subsection{}
We define the following first order formula,

$\varphi(x)=\exists{y,z}$ . $y\neq{x}\land{z\neq{x}}\land{y\neq{z}}\land{x\sim{y}}\land{y\sim{z}}\land{z\sim{x}}$

Or, under the assumption that $G$ is always a simple graph,

$\varphi(x)=\exists{y,z}$ . $x\sim{y}\land{y\sim{z}}\land{z\sim{x}}$

Denote $U:=\{u\in{V}\,|\,{G\vDash\varphi(u)}\}$, then for every $x$, either $x\in{U}$ or $x\notin{U}$.
\subsection{}
\subsection{}
The empty set can be defined by the following first order formula,

$\varphi_\phi(x)=x\neq{x}$, which is a contradiction, hence $U_\phi:=\{u\in{V}\,|\,{G\vDash\varphi_\phi(u)}\}=\phi$.

The set of all graph vertices can be defined by the following first order formula,

$\varphi(x)=x=x$, which is a tautology, hence $U_V:=\{u\in{V}\,|\,{G\vDash\varphi(u)}\}=V$.

Both formulas are either true or false for all $v\in{V}$, therefore the sets that satisfy them are called the trivial definable sets.

Comment: there are specific symbols in first order languages, to specify tautology and contradiction, but I prefer the above sentences.
\subsection{}
The required statement would be,
\noindent
\[\varphi'=\forall{0\leq{p}\leq{1}},\epsilon>0\,.\,\exists{N}\,.\,\forall{n>N},\varphi\,.\,\]\[.\,\varphi=\varphi_\phi\lor\varphi=\varphi_V\lor\mathbb{P}[G(n,p)\vDash\varphi]<\epsilon\]

Another version of $\varphi'$,
\noindent
\[\varphi'=\forall{0\leq{p}\leq{1}},\epsilon>0\,.\,\exists{N}\,.\,\forall{n>N},\varphi\,.\,\]\[.\,\neg(\exists{v,u\in{V}}\,.\,\varphi\neq\varphi_\phi\land\varphi\neq\varphi_V\land\mathbb{P}[G(n,p)\vDash\varphi(u)]\geq\epsilon\land\mathbb{P}[G(n,p)\neg\vDash\varphi(v)]\geq\epsilon)\]
\subsection{}
This should be immediate from Fagin's 0-1 law, but I shall describe my idea of a proof.

For every $x\in{V}$, a sentence $\varphi(x)$ is a finite set of statements which can contain a finite subset of the graph vertices $x_1,x_2\dots,x_k\in{V}$, for some $k<\infty$, the quantifiers $\exists,\forall$, the relations $=,\sim$, and the negation unary logical operator $\neg$. These statements are related to each other by the logical operators $\land,\lor$.

The idea of the proof is by induction on the total number of elements in the sentence.

We start from one statement with one quantifier, one vertex and one relation.

$\varphi(x)=\exists{y\in{V}}\,.\,y={x}$ would be a tautology, so we take 

$\varphi(x)=\exists{y\in{V}}\,.\,y\neq{x}\land{y={x}}$ (we actually added more elements implicitly, but that does not matter).

Fix $n>0$, $\mathbb{P}[G\vDash\varphi(x)]$ is the probability that there exists an edge between $x$ and some other vertex in the graph, which is the completion of the event that $x$ does not have an edge with any other graph vertex, that is \[\mathbb{P}[G\sim{G(n,p)}\neg\vDash\varphi(x)]=\prod_{x\neq{y}}\mathbb{P}[x\nsim{y}]=\prod_{y\neq{x}}1-\mathbb{P}[x\sim{y}]=\]\[=\prod_{i=1}^{n-1}1-p=(1-p)^{n-1}=\frac{(1-p)^n}{1-p}\]
but \[\lim_{n\rightarrow\infty}\frac{(1-p)^n}{1-p}=0\]
hence for every $x\in{V}$, \[\lim_{n\rightarrow\infty}\mathbb{P}[G(n,p)\vDash\varphi(x)]=1-\lim_{n\rightarrow\infty}\mathbb{P}[G(n,p)\neg\vDash\varphi(x)]=1\Rightarrow{V_\varphi={V}}.\]
This assumes that $p$ is constant for every $n>0$, otherwise there might not be a convergence (to zero).

Same way, we can prove that if $\varphi(x)=\forall{y\neq{x}}\,.\,x\sim{y}$, then \[\lim_{n\rightarrow\infty}\mathbb{P}[G(n,p)\vDash\varphi(x)]=\lim_{n\rightarrow\infty}p^{n-1}=\lim_{n\rightarrow\infty}\frac{p^n}{p}=0\Rightarrow{V_\varphi=\phi}.\]
Thus we assume that for any sentence $\varphi$ of $m$ elements, either

\[\lim_{n\rightarrow\infty}\mathbb{P}[G\sim{G(n,p)\vDash\varphi}]=0\Rightarrow\lim_{n\rightarrow\infty}\mathbb{P}[G\sim{G(n,p)\vDash\neg\varphi}]=1\]

or,

\[\lim_{n\rightarrow\infty}\mathbb{P}[G\sim{G(n,p)\vDash\varphi}]=1\Rightarrow\lim_{n\rightarrow\infty}\mathbb{P}[G\sim{G(n,p)\vDash\neg\varphi}]=0\]

We need to prove for $m+1$ elements. Suppose that the additional element is another statement $\varphi'$, the the relation between them is either $\varphi\land\varphi'$ or $\varphi\lor\varphi'$, but by the assumption, $\varphi,\varphi'$ have limit probabilities, thus \[\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash(\varphi\land\varphi')]=\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash\varphi]\cdot\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash\varphi']\]

and,

\[\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash(\varphi\lor\varphi')]=\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash\neg(\neg\varphi\land\neg\varphi')]=\]\[=1-\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\vDash\neg\varphi]\cdot\lim_{n\rightarrow\infty
}\mathbb{P}[G\sim{G(n,p)}\neg\vDash\varphi']\]
\end{document}
